<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Header line</title>
	<style type="text/css">
		body {
			margin: 0;
			padding: 40px 10px;
			line-height: 30px;
		}

		header {
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			height: 40px;
			text-align: center;
			width: 100%;
			line-height: 40px;
			background: rgb(213, 254, 213);
		}

		.menu {
			height: 100%;
			display: block;
		}

		.header-line {
			background: rgba(10, 130, 50, .6);
			position: fixed;
			top: 40px;
			left: 0;
			height: 2px;
			transition: .05s transform, 1s opacity;
			width: 100%;
			transform: translateX(-100vw);
			opacity: 0;
		}
	</style>
</head>
<body>
	<header>
		<div class="menu"></div>
	</header>
	<div class="header-line"></div>
	Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores voluptate corrupti, deserunt delectus ipsum obcaecati. Atque eos cupiditate, debitis minus eaque vel nostrum aspernatur id architecto, nobis non incidunt eveniet!
	Laborum cupiditate cum beatae soluta blanditiis dicta non adipisci quo delectus quos esse magni odio voluptatum architecto suscipit excepturi itaque obcaecati in, quasi tempora iusto repellat impedit. Vel, facere odio?
	Earum reiciendis et repellendus voluptatum veritatis deleniti aperiam, natus laborum culpa placeat, rerum dolorum. Dignissimos suscipit commodi adipisci repellat eos? Quibusdam, maiores! Porro, est corporis velit perspiciatis hic odio incidunt.
	Voluptates error repellendus at eius iusto debitis expedita fuga? Sapiente fugiat asperiores nulla cupiditate eos fuga voluptatum cum provident dolorum! Harum architecto assumenda voluptatibus tenetur dolores sit debitis asperiores ipsum.
	Iste ea accusamus rerum aut expedita, nostrum ullam libero porro similique nam ipsam inventore deserunt et eligendi. Iste mollitia et, voluptatibus nemo, dicta quas totam aspernatur, alias quam culpa impedit.
	Sequi enim impedit similique harum expedita unde totam consequuntur aliquam modi pariatur id ipsum blanditiis eveniet accusamus dolor voluptas fugiat, earum recusandae ea consequatur facere ratione voluptatem dolores! Blanditiis, earum?
	Vero praesentium labore asperiores est voluptates sit quidem delectus, consequatur, deleniti unde reiciendis nisi. Inventore saepe doloremque quo, assumenda, laboriosam reiciendis, reprehenderit cum vel vitae exercitationem eligendi velit iste sequi?
	At quis id officiis commodi quae dolorem nihil autem aperiam aspernatur. Pariatur fugit voluptatibus, accusantium doloremque fugiat, deleniti temporibus alias laborum reprehenderit reiciendis, sequi libero ea ex nihil repellendus. Corporis.
	Ipsam, perspiciatis sapiente? Doloremque culpa doloribus iusto numquam minima tenetur perferendis officia voluptas nobis vel id at deleniti pariatur odit, architecto explicabo porro excepturi, officiis reiciendis? Consequatur voluptatibus ut quo?
	Harum nisi quo magnam. Molestiae, provident nulla dicta quidem animi autem aliquid rerum facere pariatur deserunt magni voluptas excepturi sint quaerat. Laudantium neque mollitia commodi saepe quaerat soluta dolores! Dolores!
	Ducimus cupiditate autem eaque corporis error quam accusantium eveniet reiciendis! Voluptas voluptatum eum reprehenderit, illo debitis nulla sit unde esse praesentium minima mollitia totam minus inventore, omnis culpa temporibus facilis.
	Hic consequatur, et suscipit quis nemo vel aperiam autem accusamus corporis molestias laborum quia quasi quaerat, saepe, amet sed obcaecati officiis! Explicabo delectus libero magnam nulla adipisci ea vero dicta?
	Vero eligendi obcaecati minima voluptatem labore, minus voluptatibus ipsam, exercitationem facilis reprehenderit iste recusandae voluptatum architecto necessitatibus perspiciatis deserunt voluptates tempora, velit officia aliquid autem quia inventore molestiae! Cum, tempore.
	Alias doloribus reiciendis debitis libero nostrum quos atque voluptates adipisci sunt consectetur ipsa iure accusamus aut quidem incidunt ullam quam, officiis animi non magni velit nisi voluptatem officia beatae? Et!
	Expedita illum error et maxime facere mollitia nesciunt exercitationem, eius voluptatem reprehenderit est quibusdam ab cumque accusantium ad deserunt alias eveniet repellendus debitis consequuntur culpa. Aperiam beatae iusto culpa sint.
	Temporibus laboriosam, perferendis officiis praesentium harum dicta assumenda fuga qui error modi dolores? Deserunt itaque quod mollitia quam. Aspernatur quae hic autem deleniti. Alias atque quidem quas inventore ipsa nostrum?
	Ratione ut reprehenderit explicabo veritatis? Magnam, autem dolores voluptatum excepturi libero nemo dolorem repellat consequuntur eaque non rerum cumque cupiditate minus blanditiis maiores, nostrum consectetur aspernatur pariatur tenetur aperiam facere!
	Quod dolorem ipsa iusto earum tenetur doloribus nam tempore perferendis iure, rem neque voluptatibus itaque alias saepe, repudiandae minus! Id accusamus possimus harum quasi doloremque, nemo obcaecati consectetur in eum?
	Quo nemo et incidunt neque accusamus perspiciatis harum aliquid commodi esse sed alias excepturi, distinctio natus aliquam optio eaque suscipit aperiam pariatur nulla eligendi, odit nisi voluptatum ullam ad. Optio.
	Quaerat assumenda aut accusamus necessitatibus iusto non veniam, eaque hic nemo eos ab obcaecati, dolore a amet pariatur iure nobis asperiores ipsam? Aut cumque quasi asperiores voluptate magni in a.
	Totam ab eveniet voluptatem quo recusandae deserunt saepe quis, consequuntur minima debitis sit in cum aut! Ex, neque excepturi! Veniam, soluta temporibus. Itaque quidem atque libero molestiae nobis, tempore totam.
	Illum corrupti nisi vel tempora vitae ipsum, iste soluta blanditiis! Deleniti ipsa nam fuga earum! Earum iusto dolore debitis, exercitationem tenetur similique corrupti dolorum cupiditate ipsum obcaecati rerum maiores magni.
	Reprehenderit ullam, aliquid saepe molestias quia accusamus mollitia. Praesentium quia saepe error asperiores dignissimos earum eaque, quam aut autem fugiat tempora tenetur aliquam ducimus provident aperiam doloremque itaque dolorum sint.
	Quisquam dolores labore non, at, enim libero molestias quaerat incidunt ipsum possimus, consectetur vel tempora consequuntur sequi error soluta commodi. Iusto excepturi vel, nesciunt in illum natus placeat doloribus sit.
	Saepe fuga illo repellendus quidem, ipsum ab sapiente eos ipsam sequi laudantium distinctio quibusdam obcaecati, temporibus minima! Natus dolorum cumque, minus fugit eius quam culpa quia ducimus sit molestias modi?
	Neque laboriosam nihil, velit eveniet iste soluta facilis natus delectus, ad ea, corrupti dolorem. Consequatur beatae quas sequi expedita iste ex sunt earum, deserunt architecto, accusantium quo, excepturi quasi tempora.
	Error, perferendis natus impedit sapiente vero quasi sit dolor quod unde corporis earum qui totam nemo ipsa cupiditate quisquam, explicabo sequi officia animi reprehenderit quas dicta! Quibusdam voluptatum eaque quo.
	Unde veniam dolore itaque modi pariatur minima dolores quibusdam inventore! Ipsa rerum aliquid nobis ipsam ducimus voluptas itaque exercitationem provident, maxime hic voluptatum laudantium repellat, vel fuga consequuntur at totam.
	Sequi pariatur at sed accusamus! Cupiditate velit repellendus cum delectus maxime minus, optio amet molestias nihil illo sint excepturi quisquam blanditiis, pariatur aut quidem neque culpa ea quasi rerum impedit.
	Recusandae ullam sequi modi repudiandae atque qui harum ex necessitatibus labore repellat deserunt error magni aspernatur minus provident, aut officia, incidunt voluptatibus nulla nobis quos dolorem culpa maiores doloribus! Est.
	Pariatur nesciunt dignissimos, fuga eaque quis quasi veniam, consequuntur quod nostrum at, quae aliquid quas voluptatem vitae! Praesentium soluta amet obcaecati, voluptates blanditiis, alias et explicabo maiores aliquam laudantium assumenda?
	Consequuntur obcaecati maiores fugiat animi debitis est odit cupiditate, asperiores inventore dicta veritatis fugit dolor labore voluptatem quidem beatae dolorum necessitatibus aut. Exercitationem commodi libero sapiente repellat quae ratione cum.
	Aliquid voluptate reprehenderit omnis veritatis. Earum molestias delectus molestiae necessitatibus consequuntur nobis culpa odio ad quas possimus similique suscipit, obcaecati ipsum iure totam vel explicabo fuga commodi debitis sequi tempora?
	Accusamus alias excepturi saepe earum cupiditate, voluptates facilis distinctio, dicta necessitatibus cumque, velit minima. Placeat, minima corrupti ad, facilis delectus harum enim deserunt totam, earum nam assumenda temporibus! Fugit, voluptatem?
	Eius fuga dolor distinctio? Reprehenderit doloribus quasi necessitatibus, doloremque reiciendis nisi quae autem ipsam tempore rerum sequi alias. Repellat sequi ad minima illo corrupti vero tempora voluptatem recusandae sapiente obcaecati.
	Perferendis delectus soluta consequuntur impedit suscipit, tempore illum, quibusdam provident dicta non saepe sed odio quae? Perspiciatis neque corrupti, nam consequuntur aliquid rem iure cum sequi, unde obcaecati quos vitae.
	Commodi hic est nesciunt vitae labore amet, itaque nam consectetur voluptate necessitatibus possimus explicabo assumenda pariatur, molestiae libero quibusdam fugiat reprehenderit, odit deserunt dicta unde? Aspernatur voluptatibus at explicabo quo?
	Voluptatibus odio delectus alias temporibus ab placeat aspernatur repudiandae sit, est doloribus debitis modi, sunt iure cumque perspiciatis! Dignissimos officia perferendis quo, eveniet vitae doloribus sit maxime minima sint adipisci!
	Repellat asperiores corporis nihil inventore vero in aliquam quod similique adipisci deserunt quisquam doloremque, iure expedita ut accusamus tenetur voluptates, fuga odio fugiat pariatur consectetur cupiditate. Dolore repudiandae exercitationem laborum!
	Esse iste, ex odit sapiente vitae eaque reprehenderit molestias perspiciatis dicta totam delectus beatae cumque libero quos dolore aut, ratione, tempore voluptatem labore. Odit consequatur dolorum eum fugit, incidunt sit?
	Obcaecati aliquid, sapiente illo nihil esse molestias vitae voluptatum dolores similique tempora. Ullam aut hic ab nulla corporis rem nobis, nesciunt quis facilis dolor tenetur odit, deleniti aliquam consectetur ipsum?
	Architecto, fuga! Dignissimos tenetur corrupti, corporis excepturi, quidem modi laborum inventore veritatis, ex quasi consectetur enim nobis! Modi quod eligendi fugiat quae! Ab explicabo labore unde ex at nihil fugit!
	Dolorem doloribus labore iure impedit, itaque, molestias esse veritatis sapiente blanditiis ut tempore ad? In, perferendis! Labore accusamus distinctio vero fugiat impedit modi, quod aspernatur sint, quibusdam voluptatum, non voluptatem.
	Hic reiciendis rerum consectetur, ullam eligendi vel recusandae totam omnis iure aliquam tempora enim eum voluptatum. Voluptatibus, quidem, facilis ullam nobis ducimus maxime sit soluta suscipit incidunt nostrum voluptates error!
	<script type="text/javascript">
		'use strict';

		var onScrollHandler = {
			_pageHeight: null,

			_headerLine: null,
			
			_currentHeight: null,

			_isHidden: true,

			_timer: null,

			init: function() {
				if(!this._pageHeight) 
					this._pageHeight = document.body.offsetHeight  - window.window.innerHeight;

				if(!this._headerLine) {
					var elems = document.getElementsByClassName('header-line');

					if(elems && elems.length)
						this._headerLine = elems[0];
				}
			},

			show: function() {
				if(this._isHidden) {
					this._headerLine.style.opacity = 1;
					this._isHidden = false;
				}
			},

			setWillChange() {
				this._headerLine.style.willChange = 'transform';

				let _this = this;
				
				clearTimeout(this._timer);
				this._timer = setTimeout(() => {
					_this._headerLine.style.willChange = '';
				}, 100)
			},

			animate: function() {
				this.setWillChange();
				
				var percent = 100 - (this._currentHeight / this._pageHeight) * 100;
				percent = percent.toFixed(2);

				if(!isNaN(percent)) 
					this._headerLine.style.transform = `translateX(-${percent}vw)`;
			},

			scroll: function() {
				this.init();
				
				this._currentHeight = window.pageYOffset;

				if(this._headerLine) {
					this.animate();
					this.show();
				}
			}
		};

		let scrollHandler = throttle(onScrollHandler.scroll, 10, onScrollHandler);
		window.onscroll = () => scrollHandler();

		function throttle(fn, delay, ctx) {
			let _called = false,
				_this = null,
				_savedArgs = null;

			let wrapper = () => {
				if(_called) {
					_savedArgs = arguments;
					_this = this;
					return;
				}

				_called = true;

				if(typeof(fn) !== 'function')
					throw new Error('callback must be a function expected ' + typeof(fn));
				
				fn.apply(ctx, arguments);

				setTimeout(function() {
					_called = false;
					if(_savedArgs) {
						wrapper.apply(_this, _savedArgs);
						_savedArgs = _this = false;
					}	
				}, delay);
			}

			return wrapper;
		}
	</script>
</body>
</html>
